" ================================================================================================
" ğŸ§ğŸ§ğŸ§ Basic settings ğŸ§ğŸ§ğŸ§
syntax on
set hlsearch
set scrolloff=10
set ignorecase "--åœ¨æœç´¢æ—¶å¿½ç•¥å¤§å°å†™
set incsearch
set sneak
set clipboard=unnamed
set ideajoin
set ideamarks
"--å°†<leader>è®¾ç½®ä¸º ç©ºæ ¼ é”®
let mapleader = " "

" ================================================================================================
" ğŸ‘»ğŸ‘»ğŸ‘» IdeaVim plugins ğŸ‘»ğŸ‘»ğŸ‘»
" ================================================================================================
" --- Enable IdeaVim plugins https://jb.gg/ideavim-plugins
Plug machakann/vim-highlightedyank'
Plug 'tpope/vim-commentary'
Plug 'vim-scripts/argtextobj.vim'
Plug 'tpope/vim-surround'
Plug '<plugin-github-reference>'
Plug 'easymotion/vim-easymotion'
Plug 'preservim/nerdtree'
set which-key
set notimeout

" ================================================================================================
" ğŸŒğŸŒğŸŒ No Leader Keymaps ğŸŒğŸŒğŸŒ
" ================================================================================================
"debugç¥å™¨
"nmap <C-j> :action StepOver<CR>
"nmap <C-k> :action Resume<CR>
"nmap <C-h> :action StepOut<CR>
"nmap <C-l> :action ForceStepInto<CR>
nmap <Leader>u  <C-u>
nmap <Leader>d  <C-d>
"æ·»åŠ æ³¨é‡Š
nmap ;; :action CommentByLineComment<CR>
"å…¨å±€åˆ†ç±»æ›¿æ¢
nmap <A-R> :action ReplaceInPath<CR>
map <A-[> <Action>(Back)
nmap <A-]> :action Forward<CR>
nmap <TAB> >>
nmap <C-J> <Action>(MoveLineDown)
nmap <C-K> <Action>(MoveLineUp)
nmap <A-J> <Action>(MoveStatementDown)
nmap <A-K> <Action>(MoveStatementUp)
vmap <C-J> <Action>(MoveLineDown)
vmap <C-K> <Action>(MoveLineUp)
vmap <A-J> <Action>(MoveStatementDown)
vmap <A-K> <Action>(MoveStatementUp)

nmap ga :action GotoAction<CR>
nmap gc :action GotoClass<CR>
nmap gd :action GotoDeclaration<CR>
nmap gf :action GotoFile<CR>
nmap gi :action GotoImplementation<CR>
nmap gs :action GotoSymbol<CR>
"æ°´å¹³åˆ†å‰²"
nmap sv :vsplit<CR>
"å‚ç›´åˆ†å‰²"
nmap sg :split<CR>

" Quit visual mode
vmap v <Esc>
" Yank to the end of line
nmap Y y$
imap jk <Esc>
" Redo
nmap U <C-r>
" --æ ¼å¼åŒ–ï¼ˆè§„èŒƒåŒ–ï¼‰æ–‡æœ¬ï¼Œå³å¯¹é€‰å®šçš„æ–‡æœ¬è¿›è¡Œæ¢è¡Œæˆ–é‡æ’ï¼Œé€‚åº”æŒ‡å®šçš„æ–‡æœ¬å®½åº¦ã€‚
map Q gq

"è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š
nmap ge <action>(GotoNextError)
"åœ¨æºä»£ç å’Œæµ‹è¯•ä»£ç ä¹‹é—´å¿«é€Ÿåˆ‡æ¢
nmap gt <action>(GotoTest)
"å°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªæ–¹æ³•çš„å£°æ˜å¤„
nmap gm <action>(MethodUp)

" bookmark åˆ‡æ¢ä¹¦ç­¾
nmap ma <action>(ToggleBookmark)
"åˆ‡æ¢æ ‡ç­¾é¡µ
nmap H <action>(NextTab)
nmap L <action>(PreviousTab)

"å°†Ctrl + s æ˜ å°„ä¸ºä¿å­˜æ–‡æ¡£(ä¹Ÿå¯ä»¥åœ¨VIMè®¾ç½®é‡Œå°†æ­¤å¿«æ·é”®è®¾ç½®ä¸ºIDEAçš„å¿«æ·é”®)
nmap <C-S> <action>(SaveAll)
imap <C-S> <Esc><action>(SaveAll)

"æŒ‰ä¸‹ <C-n> å°†æ‰“å¼€ NERDTree æ–‡ä»¶èµ„æºç®¡ç†å™¨
nmap <C-n> :NERDTree<CR>
"æŒ‰ä¸‹ <C-t> å°†åˆ‡æ¢ NERDTree æ–‡ä»¶èµ„æºç®¡ç†å™¨çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œå³æ‰“å¼€æˆ–å…³é—­ NERDTree
nmap <C-t> :NERDTreeToggle<CR>
"æŒ‰ä¸‹ <C-f> å°†åœ¨ NERDTree æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­å®šä½å½“å‰ç¼–è¾‘æ–‡ä»¶æ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå¹¶ä½¿å…¶å¯è§
nmap <C-f> :NERDTreeFind<CR>
nmap fu :action FindUsages<CR>

" ================================================================================================
" â­ï¸â­ï¸â­ï¸ Leader Keymaps â­ï¸â­ï¸â­ï¸ =====================================
" ================================================================================================

nmap <Leader>re :action RenameElement<CR>
nmap <Leader>rf :action RenameFile<CR>
nmap <Space>ga :action GotoAction<CR>
nmap <leader>ft <action>(FindInPath)

"é‡æ–°æ ¼å¼åŒ–ä»£ç ï¼Œä½¿å…¶ç¬¦åˆé¢„å®šä¹‰çš„ä»£ç æ ·å¼å’Œè§„èŒƒ \| ä¼˜åŒ–å¯¼å…¥è¯­å¥ï¼Œåˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥ï¼Œå¹¶å°†å¯¼å…¥è¯­å¥æŒ‰å­—æ¯é¡ºåºè¿›è¡Œæ’åˆ—
nmap <leader>fm <action>(ReformatCode) \| <action>(OptimizeImports)

"========== c ==========
let g:WhichKeyDesc_CodeAndClose = "<leader>c CodeAndClose"
"å…³é—­æ‰€æœ‰æ ‡ç­¾é¡µ
nmap <leader>ca <action>(CloseAllEditors)
"å…³é—­å½“å‰æ ‡ç­¾é¡µ
nmap <leader>ce :action CloseEditor<CR>
"ä»£ç è‡ªåŠ¨è¡¥å…¨
nmap <leader>cc <action>(CodeCompletion)

"========== d ==========
"æ‰“æ–­ç‚¹/è§£é™¤æ–­ç‚¹
nmap <leader>p <Action>(ToggleLineBreakpoint);
"è°ƒè¯•
nmap <leader>b <Action>(Debug)

"========== e ==========
"æ‰“æ–­ç‚¹/è§£é™¤æ–­ç‚¹
" extract method/function å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæå–ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•(Ctrl + Alt + M)
vmap <leader>em <action>(ExtractMethod)
" extract constant ï¼ˆå¼•å…¥å¸¸é‡ï¼‰çš„é‡æ„æ“ä½œ:å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæŠ½å–ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢é€‰ä¸­çš„ä»£ç ç‰‡æ®µä¸ºæ–°çš„å¸¸é‡å¼•ç”¨(Ctrl + Alt + C)
vmap <leader>ec <action>(IntroduceConstant)
" extract field ï¼ˆå¼•å…¥å­—æ®µï¼‰çš„é‡æ„æ“ä½œ:å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µè½¬åŒ–ä¸ºä¸€ä¸ªæ–°çš„å­—æ®µï¼Œå¹¶è‡ªåŠ¨å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæ›¿æ¢ä¸ºå¯¹è¯¥å­—æ®µçš„å¼•ç”¨(Ctrl + Alt + F)
vmap <leader>ef <action>(IntroduceField)
" extract variable ï¼ˆå¼•å…¥å˜é‡ï¼‰çš„é‡æ„æ“ä½œ:å°†é€‰ä¸­çš„ä»£ç ç‰‡æ®µæŠ½å–ä¸ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¹¶è‡ªåŠ¨æ›¿æ¢é€‰ä¸­çš„ä»£ç ç‰‡æ®µä¸ºæ–°çš„å˜é‡å¼•ç”¨(Ctrl + Alt + V)
vmap <leader>ev <action>(IntroduceVariable)

"========== g ==========
let g:WhichKeyDesc_GitOrGenerate = "<leader>g GitOrGenerate"

"æ‰§è¡Œç‰ˆæœ¬æ§åˆ¶ï¼ˆVCSï¼‰çš„å›æ»šæ“ä½œï¼Œå°†ä¿®æ”¹çš„ä»£ç è¿˜åŸåˆ°ä¹‹å‰çš„ç‰ˆæœ¬
nmap <leader>gr :action Vcs.RollbackChangedLines<CR>
"ç”Ÿæˆæ„é€ å™¨
nmap <leader>gc :action GenerateConstructor<CR>
"ç”Ÿæˆgetter
nmap <leader>gg :action GenerateGetter<CR>
"ç”Ÿæˆsetter
nmap <leader>gs :action GenerateSetter<CR>
"ç”Ÿæˆsetterå’Œgetter
nmap <leader>ga <action>(GenerateGetterAndSetter)
"ç”Ÿæˆ equals() å’Œ hashcode() çš„é‡å†™æ–¹æ³•
nmap <leader>ge <action>(GenerateEquals)
"ç”ŸæˆtoString
nmap <leader>gt <action>(Actions.ActionsPlugin.GenerateToString)

"diff æ˜¾ç¤ºæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶å†å²(git)
nmap <leader>gd <action>(Vcs.ShowTabbedFileHistory)

"========== j ==========
"æ™®é€šæ¨¡å¼ä¸‹åœ¨è¡Œå°¾ä¸€ä¸ªåˆ†å·ï¼Œç„¶åè¿›å…¥æ’å…¥æ¨¡å¼å¹¶åœ¨å½“å‰è¡Œçš„ä¸‹æ–¹æ–°å»ºä¸€è¡Œ
nmap <leader>j A;<ESC>o

"========== n ==========
"å–æ¶ˆæœç´¢é«˜äº®æ˜¾ç¤º(No light)
nmap <leader>nl :nohlsearch<CR>
"åœ¨å½“å‰ç›®å½•æ–°å»ºæ–‡ä»¶å¤¹
nmap <leader>nd <action>(NewDir)
"åœ¨å½“å‰ç›®å½•æ–°å»ºç±»
nmap <leader>nc <action>(NewClass)

"========== r ==========
let g:WhichKeyDesc_RunOrRe = "<leader>r RunOrRe"

"è¿è¡Œå½“å‰ç¼–è¾‘å™¨ä¸­çš„æ–‡ä»¶æˆ–ç±»
nmap <leader>ru :action RunClass<CR>
"é‡æ–°è¿è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œçš„ç¨‹åºæˆ–æµ‹è¯•
nmap <leader>rr <action>(Rerun)
"é‡æ–°è¿è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œçš„æµ‹è¯•ï¼ˆUnit Testsï¼‰
nmap <leader>rt <action>(RerunTests)

"========== s ==========
let g:WhichKeyDesc_Show = "<leader>s Show"

"æ˜¾ç¤ºå½“å‰æ‰“å¼€æ–‡ä»¶çš„æ–‡ä»¶ç»“æ„å¼¹å‡ºçª—å£ï¼Œå…¶ä¸­åŒ…å«æ–‡ä»¶ä¸­çš„ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ç»“æ„(Alt + 7)
nmap <leader>ss <action>(FileStructurePopup)
"æ˜¾ç¤ºä¹¦ç­¾ï¼ˆBookmarksï¼‰å·¥å…·çª—å£ï¼Œå…¶ä¸­åŒ…å«å½“å‰æ–‡ä»¶ä¸­è®¾ç½®çš„ä¹¦ç­¾åˆ—è¡¨(Ctrl + F11)
nmap <leader>sb <action>(ShowBookmarks)
"ç”¨äºæ˜¾ç¤ºæ–¹æ³•æˆ–å‡½æ•°çš„å‚æ•°ä¿¡æ¯(Ctrl + p)

"å…³é—­åˆ°åªå‰©å½“å‰tabæ 
nmap <leader>sc :action CloseAllEditorsButActive<CR>

"========== y ==========
"å°† "+ ç®€åŒ–ä¸º <leader>
let g:WhichKeyDesc_CopyClipboard = "<leader>y CopyClipboard"
vmap <leader>y "+y
"å°† "+ ç®€åŒ–ä¸º <leader>
let g:WhichKeyDesc_CopyClipboard= "<leader>y CopyClipboard"
nmap <leader>y "+yy

"========== z ==========
let g:WhichKeyDesc_Zip = "<leader>z Zip"

"å±•å¼€æ‰€æœ‰ä»£ç æŠ˜å åŒºåŸŸ(Ctrl + Shift + åŠ å·é”®)
nmap <leader>zo <action>(ExpandAllRegions)
"æŠ˜å æ‰€æœ‰ä»£ç æŠ˜å åŒºåŸŸ(Ctrl + Shift + å‡å·é”®)
nmap <leader>zc <action>(CollapseAllRegions)

nmap <Space>ff :action ShowFilePath<CR>
